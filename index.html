<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Quit Tobacco Journey</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Fonts + Icons -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <script src="https://unpkg.com/feather-icons"></script>

  <style>
    /* ================= ROOT (themes + font) ================= */
    :root {
      --bg-1: #020711;
      --bg-2: #07111e;
      --bg-3: #0c1b2f;

      --card-bg: rgba(255,255,255,0.08);
      --card-border: rgba(255,255,255,0.16);
      --text-main: #f9fafb;
      --text-muted: #94a3b8;
      --accent: #2cff8d;
      --accent-strong: #16c269;

      --font-scale: 1;
    }

    /* Dark theme variations (all glossy & dark) */
    .theme-night {
      --bg-1: #020617;
      --bg-2: #020617;
      --bg-3: #020617;
      --card-bg: rgba(15,23,42,0.9);
      --card-border: rgba(148,163,184,0.35);
      --text-main: #e5f3ff;
      --text-muted: #9ca3af;
      --accent: #22c55e;
      --accent-strong: #16a34a;
    }

    .theme-graphite {
      --bg-1: #020202;
      --bg-2: #050608;
      --bg-3: #050608;
      --card-bg: rgba(15,15,15,0.92);
      --card-border: rgba(148,163,184,0.28);
      --text-main: #f3f4f6;
      --text-muted: #9ca3af;
      --accent: #34d399;
      --accent-strong: #059669;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      padding: 0;
      background: radial-gradient(circle at top, var(--bg-1), var(--bg-2), var(--bg-3));
      font-family: "Poppins", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      color: var(--text-main);
      font-size: calc(16px * var(--font-scale));
      user-select: none;
    }

    .container {
      padding: 20px;
      padding-bottom: 120px;
      max-width: 520px;
      margin: 0 auto;
    }

    .screen { display: none; }
    .screen.show { display: block; animation: fadeIn 0.25s ease-out; }

    .card {
      background: var(--card-bg);
      backdrop-filter: blur(22px);
      -webkit-backdrop-filter: blur(22px);
      border-radius: 22px;
      border: 1px solid var(--card-border);
      padding: 18px 18px 20px;
      margin-bottom: 16px;
      box-shadow: 0 18px 40px rgba(0,0,0,0.45);
    }

    h2, h3 { margin: 0 0 6px; }
    p { margin: 4px 0; }

    .badge-row {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 14px;
    }

    .badge-dot {
      width: 11px;
      height: 11px;
      border-radius: 999px;
      background: var(--accent);
      box-shadow: 0 0 10px var(--accent);
    }

    .badge-text {
      letter-spacing: 3px;
      font-size: 11px;
      text-transform: uppercase;
      color: var(--text-muted);
    }

    .highlight { color: var(--accent); font-weight: 600; }

    .quote {
      border-left: 3px solid var(--accent);
      padding-left: 10px;
      color: var(--text-muted);
      font-size: calc(13px * var(--font-scale));
      margin-top: 8px;
    }

    .btn {
      width: 100%;
      padding: 13px 16px;
      border-radius: 14px;
      border: none;
      outline: none;
      cursor: pointer;
      background: linear-gradient(135deg, var(--accent), var(--accent-strong));
      color: #041814;
      font-weight: 600;
      font-size: calc(15px * var(--font-scale));
      margin-top: 14px;
      box-shadow: 0 0 18px rgba(44,255,141,0.5);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .btn:active {
      transform: translateY(1px) scale(0.99);
      box-shadow: 0 0 10px rgba(44,255,141,0.4);
    }

    .btn-small {
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid var(--accent);
      background: rgba(0,0,0,0.12);
      color: var(--accent);
      font-size: calc(12px * var(--font-scale));
      display: inline-flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
      margin: 4px 4px 0 0;
    }

    input {
      width: 100%;
      padding: 9px 10px;
      border-radius: 10px;
      border: 1px solid rgba(148,163,184,0.5);
      background: rgba(15,23,42,0.7);
      color: var(--text-main);
      font-size: calc(14px * var(--font-scale));
      margin-bottom: 8px;
      outline: none;
    }

    input:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(44,255,141,0.5);
    }

    label {
      font-size: calc(12px * var(--font-scale));
      color: var(--text-muted);
      display: block;
      margin-bottom: 2px;
    }

    .stats-row {
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 6px 12px;
      margin-top: 6px;
    }

    .stat-pill {
      flex: 1 1 45%;
      padding: 8px 10px;
      border-radius: 14px;
      border: 1px solid rgba(148,163,184,0.5);
      font-size: calc(12px * var(--font-scale));
    }

    .stat-label {
      color: var(--text-muted);
      font-size: calc(11px * var(--font-scale));
    }
    .stat-value {
      font-size: calc(16px * var(--font-scale));
      font-weight: 600;
    }

    .streak-glow {
      box-shadow: 0 0 20px rgba(44,255,141,0.55);
      border-color: rgba(44,255,141,0.85);
    }

    .section-title {
      font-weight: 600;
      margin-top: 8px;
      margin-bottom: 4px;
    }

    /* Navbar */
    .navbar {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      padding: 8px 2px 10px;
      background: rgba(3,7,18,0.8);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border-top: 1px solid rgba(148,163,184,0.35);
      display: flex;
      justify-content: space-around;
      z-index: 20;
    }

    .nav-item {
      text-align: center;
      font-size: 9px;
      color: var(--text-muted);
      cursor: pointer;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 1px;
      min-width: 42px;
    }

    .nav-icon { width: 20px; height: 20px; }

    .nav-label {
      letter-spacing: 0.05em;
      text-transform: uppercase;
    }

    .nav-item.active-tab {
      color: var(--accent);
      text-shadow: 0 0 10px var(--accent);
    }

    .nav-item.active-tab .nav-icon {
      transform: translateY(-1px);
    }

    /* Reminder toast */
    .reminder-toast {
      position: fixed;
      bottom: 70px;
      left: 50%;
      transform: translateX(-50%);
      max-width: 520px;
      width: calc(100% - 40px);
      background: rgba(15,23,42,0.96);
      color: var(--text-main);
      border-radius: 999px;
      padding: 8px 14px;
      border: 1px solid rgba(148,163,184,0.6);
      font-size: calc(11px * var(--font-scale));
      display: none;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      z-index: 30;
    }

    .reminder-toast.show-toast {
      display: flex;
      animation: fadeIn 0.2s ease-out;
    }

    .reminder-dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: var(--accent);
      box-shadow: 0 0 8px var(--accent);
    }

    .close-toast {
      border: none;
      background: transparent;
      color: var(--text-muted);
      cursor: pointer;
      font-size: 14px;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(8px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @media (max-width: 400px) {
      .card { padding: 16px; }
      .stats-row { flex-direction: column; }
    }
  </style>
</head>
<body>

  <!-- Reminder Toast -->
  <div id="reminderToast" class="reminder-toast">
    <div style="display:flex;align-items:center;gap:8px;">
      <span class="reminder-dot"></span>
      <span id="reminderText"></span>
    </div>
    <button class="close-toast" onclick="hideReminder()">✕</button>
  </div>

  <!-- WELCOME SCREEN -->
  <div id="welcomeScreen" class="screen show">
    <div class="container">
      <div class="card">
        <div class="badge-row">
          <div class="badge-dot"></div>
          <div class="badge-text">JAI SAI NATH</div>
        </div>
        <h2 style="font-size:calc(26px*var(--font-scale));line-height:1.4;">
          I am free from <span class="highlight">nicotine</span> “disease”
        </h2>
        <p style="color:var(--text-muted);margin-bottom:6px;">
          One day • One decision • One powerful story
        </p>
        <p class="quote">
          “Har naya din ek fresh start hai. Aaj se aap apne body, mind aur future ko respect kar rahe ho.”
        </p>
        <button id="startBtn" class="btn">
          <i data-feather="arrow-right"></i>
          <span>Enter your journey</span>
        </button>
      </div>
    </div>
  </div>

  <!-- HOME / TRACKER -->
  <div id="homeScreen" class="screen">
    <div class="container">
      <div id="streakCard" class="card">
        <div style="display:flex;justify-content:space-between;align-items:center;">
          <div>
            <p id="userGreeting" style="font-size:calc(12px*var(--font-scale));color:var(--text-muted);margin-bottom:2px;">
              Hi, Friend
            </p>
            <h3>Quit journey</h3>
            <p id="dayLabel" style="font-size:calc(20px*var(--font-scale));font-weight:600;">Day 0</p>
            <p style="color:var(--text-muted);font-size:calc(12px*var(--font-scale));">
              Nicotine-free progress
            </p>
          </div>
          <div style="text-align:right;font-size:11px;color:var(--text-muted);">
            <div>Last update</div>
            <div id="lastUpdated">–</div>
          </div>
        </div>
      </div>

      <div class="card">
        <h3>Your stats</h3>
        <div class="stats-row">
          <div class="stat-pill">
            <div class="stat-label">Days free</div>
            <div class="stat-value" id="daysFree">0</div>
          </div>
          <div class="stat-pill">
            <div class="stat-label">Money saved</div>
            <div class="stat-value">₹<span id="moneySaved">0</span></div>
          </div>
          <div class="stat-pill">
            <div class="stat-label">Urges handled</div>
            <div class="stat-value" id="urgesWon">0</div>
          </div>
        </div>
      </div>

      <div class="card">
        <h3>Quit plan</h3>
        <label for="quitDate">Quit date</label>
        <input id="quitDate" type="date" />

        <label for="dailySpend">Daily spend (₹)</label>
        <input id="dailySpend" type="number" min="0" />

        <button id="savePlan" class="btn">
          <i data-feather="save"></i>
          <span>Save plan</span>
        </button>
      </div>

      <div class="card">
        <h3>Today’s mental booster</h3>
        <p id="dailyQuote" style="color:var(--text-muted);font-size:calc(13px*var(--font-scale));"></p>
        <button id="newQuoteBtn" class="btn-small">
          <i data-feather="refresh-cw" style="width:14px;height:14px;"></i>
          <span>New line</span>
        </button>
        <button id="urgeBtnHome" class="btn-small" style="float:right;">
          <i data-feather="check-circle" style="width:14px;height:14px;"></i>
          <span>I beat an urge</span>
        </button>
      </div>
    </div>
  </div>

  <!-- URGE MASTER -->
  <div id="urgeScreen" class="screen">
    <div class="container">
      <div class="card">
        <h3>Urge kya hai?</h3>
        <p style="color:var(--text-muted);font-size:calc(13px*var(--font-scale));">
          Ye koi danger nahi, sirf ek chhota chemical signal hai. Iska peak kuch minute ka hota hai. Aapka decision isse kahin zyada powerful hai.
        </p>
      </div>

      <div class="card">
        <h3>Step-by-step: abhi kya karo?</h3>

        <p class="section-title">1. Stop & name it</p>
        <p>“Ok, ye urge hai. Bas ek wave. Mera kaam calm rehna hai.”</p>

        <p class="section-title">2. 5–5–5 breathing</p>
        <p>5 sec saans andar • 5 sec hold • 5 sec bahar. 3 rounds.</p>

        <p class="section-title">3. Sip water</p>
        <p>Chhote ghut pani ke, dhyan mouth aur throat par shift karo.</p>

        <p class="section-title">4. Walk 2–3 minutes</p>
        <p>Seedha uth kar 2–3 minute walk. Body move = signal se dhyan हटना.</p>

        <p class="section-title">5. Thought switch</p>
        <p>• “Ye mujhe relax nahi karta, mera stress create karta hai.”</p>
        <p>• “Main kuch kho nahi raha, sirf ek jaal se bahar aa raha hoon.”</p>
        <p>• “Agla 5 minute bina nicotine = mera brain heal ho raha hai.”</p>
      </div>

      <div class="card">
        <h3>Aaj maine urge kaise handle kiya?</h3>
        <p style="color:var(--text-muted);font-size:calc(12px*var(--font-scale));margin-bottom:4px;">
          Jo bhi apply kiya, ek tap se note kar do:
        </p>
        <button class="btn-small" onclick="logMethod('5–5–5 breathing')">5–5–5 breathing</button>
        <button class="btn-small" onclick="logMethod('Sip water')">Sip water</button>
        <button class="btn-small" onclick="logMethod('Walk 2–3 min')">Walk 2–3 min</button>
        <button class="btn-small" onclick="logMethod('Shift focus')">Shift focus</button>
        <button class="btn-small" onclick="logMethod('Just observed wave')">Just observed wave</button>
        <button class="btn-small" onclick="logMethod('Thought switch used')">Thought switch</button>

        <button id="urgeBtn" class="btn" style="margin-top:14px;">
          <i data-feather="shield"></i>
          <span>I beat an urge</span>
        </button>
      </div>

      <div class="card">
        <h3>Future “You” ka message</h3>
        <p>• “Aaj ka decision mera future 10x healthy bana raha hai.”</p>
        <p>• “Mere bachche mujhe strong, clear-minded insan ke roop me dekhenge.”</p>
        <p>• “Har urge par jeet, mere brain ki nayi wiring strong kar rahi hai.”</p>
      </div>

      <div class="card">
        <h3>Urge wave ka graph (simple)</h3>
        <p style="font-size:12px;color:var(--text-muted);margin-bottom:6px;">Wave hammesha girti hai — chahe aap kuch karo ya na karo.</p>
        <pre style="font-size:11px;color:var(--text-muted);margin:0;">
Peak
  ⬆️
  |      /‾‾‾‾‾\
  |     /       \
  |____/         \____  Time ➜
        </pre>
      </div>
    </div>
  </div>

  <!-- AWARENESS -->
  <div id="awarenessScreen" class="screen">
    <div class="container">
      <div class="card">
        <h3>Chemicals in gutkha / tobacco</h3>
        <p>• <b>Nicotine</b> – brain ko hijack karne wala addictive signal.</p>
        <p>• <b>Supari (areca nut)</b> – Group 1 carcinogen (cancer risk high).</p>
        <p>• <b>TSNAs</b> – sabse dangerous cancer chemicals.</p>
        <p>• <b>Formaldehyde</b> – dead body preserve karne me use hota hai.</p>
        <p>• <b>Lead, cadmium, arsenic</b> – heavy metals, kidney & nerve damage.</p>
        <p>• <b>Chuna</b> – mouth lining ko jala kar absorption aur fast karta hai.</p>
      </div>

      <div class="card">
        <h3>Body damage (andar kya ho raha hai)</h3>
        <p class="section-title">Mouth & face</p>
        <p>• Zakhm jo theek nahi hote, white / red patches.</p>
        <p>• Zubaan, gaal sakht, jalne jaisa feel.</p>
        <p>• Itni strong smell ki log distance feel karte hain.</p>

        <p class="section-title">Blood & heart</p>
        <p>• Blood thick, heart ko pump karne me double mehnat.</p>
        <p>• BP high, arteries hard, heart attack ka risk high.</p>

        <p class="section-title">Brain & mood</p>
        <p>• Signal ke bina restlessness, signal ke baad thodi der ka jhootha relief.</p>
        <p>• Real shanti kabhi nahi milti, bas next dose ka wait.</p>

        <p class="section-title">Digestive system</p>
        <p>• Stomach lining jali hui, acidity, ulcer risk.</p>
        <p>• Liver, kidney toxins filter karte-karte thak jate hain.</p>

        <p class="section-title">Cancers</p>
        <p>• Mouth, tongue, throat, esophagus, pancreas – risk normal se kai guna.</p>
      </div>

      <div class="card">
        <h3>Healing timeline after quit</h3>
        <p>• 20 minutes: blood pressure normal ki taraf.</p>
        <p>• 24 hours: nicotine body se nikalne lagta hai.</p>
        <p>• 2 weeks: energy aur stamina clearly better.</p>
        <p>• 3 months: breathing aur walk karna easy.</p>
        <p>• 1–5 saal: heart attack risk strong tarike se kam.</p>
        <p>• 10 saal: mouth / throat cancer ka risk kaafi kam.</p>
      </div>
    </div>
  </div>

  <!-- MIND GYM -->
  <div id="mindScreen" class="screen">
    <div class="container">
      <div class="card">
        <h3>Instant thought switch</h3>
        <p>• “Nicotine mujhe relax nahi karta, pehle tension create karta hai phir thoda sa hata kar dhokha deta hai.”</p>
        <p>• “Main kuch chhod nahi raha, sirf ek jaal se bahar aa raha hoon.”</p>
        <p>• “Main smoker / user nahi, ek normal healthy insan hoon jo pehle fas gaya tha.”</p>
      </div>

      <div class="card">
        <h3>Daily 2-minute drill</h3>
        <p class="section-title">Step 1 – 3 lines bolo</p>
        <p>1) “Aaj main apne body ka side choose kar raha hoon.”</p>
        <p>2) “Har urge par ‘no’ = mera brain heal hone ka proof hai.”</p>
        <p>3) “Mujhe nicotine ki zarurat nahi.”</p>

        <p class="section-title">Step 2 – Future scene imagine</p>
        <p>• 6 mahine baad ka scene – clean reports, doctor ka smile, family proud.</p>

        <p class="section-title">Step 3 – Aaj ka decision</p>
        <p>• “Aaj ke din ke liye, zero tobacco. Bas aaj.”</p>
      </div>

      <div class="card">
        <h3>Old belief → New belief</h3>
        <p>• “Ye mujhe relax karta hai” → “Ye hi mera stress create karta hai.”</p>
        <p>• “Mujhe iski zarurat hai” → “Mera body iske bina better kaam karta hai.”</p>
        <p>• “Bas ek chhota sa packet hai” → “Har packet damage aur risk badhata hai.”</p>
      </div>
    </div>
  </div>

  <!-- HEALTH -->
  <div id="healthScreen" class="screen">
    <div class="container">
      <div class="card">
        <h3>Ab tak ka health reward</h3>
        <p style="color:var(--text-muted);font-size:12px;">
          Aaj tak approx <span id="healthSummary">0 minutes</span> ka extra healthy time aapke side me hai.
        </p>
      </div>

      <div class="card">
        <h3>Lungs & heart</h3>
        <p>• Phlegm / balgam kam hota hai.</p>
        <p>• Stairs chadhne me kam thakan, walk easy.</p>
        <p>• Heart ko clean blood milna start.</p>
        <p>• BP control me aana shuru.</p>
        <p>• Breathing deep hone lagti hai, chest tightness kam.</p>
      </div>

      <div class="card">
        <h3>Appearance & energy</h3>
        <p>• Honth aur daant ka colour dhire dhire normal.</p>
        <p>• Skin me blood flow better, glow wapas.</p>
        <p>• Face ka puffiness kam, aankhen fresh.</p>
        <p>• Thakan ki jagah steady energy.</p>
      </div>

      <div class="card">
        <h3>Mind, sleep & nerves</h3>
        <p>• Mood swings kam, stable energy.</p>
        <p>• Deep sleep improve; uthne par halka feel.</p>
        <p>• Better focus, decision making clear.</p>
        <p>• Anxiety, chidhchidhapan kam.</p>
      </div>

      <div class="card">
        <h3>Other systems</h3>
        <p>• Stomach acidity kam, digestion better.</p>
        <p>• Immunity strong – infections se recovery fast.</p>
        <p>• Sexual health / stamina better (blood flow). </p>
        <p>• Body me overall inflammation kam.</p>
      </div>
    </div>
  </div>

  <!-- LIFE -->
  <div id="lifeScreen" class="screen">
    <div class="container">
      <div class="card">
        <h3>You & your inner life</h3>
        <p>• Khud ke upar respect badhta hai – “Main control me hoon.”</p>
        <p>• Guilt, chhupana, jhoot kam hote hain.</p>
        <p>• Morning fresh feel, din ka start clear head se.</p>
        <p>• Apne aap se relationship friendly ho jata hai.</p>
      </div>

      <div class="card">
        <h3>Work & professional life</h3>
        <p>• Breaks par dependency kam, focus zyada.</p>
        <p>• Breath fresh, confidence high, meetings me presence strong.</p>
        <p>• Health better, sick leave kam – productivity high.</p>
        <p>• Paise bach kar real asset ban sakte hain – EMI kam, savings zyada.</p>
      </div>

      <div class="card">
        <h3>Family & relationships</h3>
        <p>• Ghar ka environment smoke / smell free – bachchon ke liye safe.</p>
        <p>• Partner ka trust aur respect badhta hai.</p>
        <p>• Aap example bante ho – “Papa / bhai ne bhi chhoda, main bhi kar sakta hoon.”</p>
        <p>• Future photos, trips, celebrations – sab me aap healthy version present.</p>
      </div>
    </div>
  </div>

  <!-- SETTINGS -->
  <div id="settingsScreen" class="screen">
    <div class="container">
      <div class="card">
        <h3>Profile</h3>
        <label for="nameInput">Your name</label>
        <input id="nameInput" type="text" placeholder="Friend" />
        <button class="btn-small" onclick="saveName()">
          <i data-feather="user-check" style="width:14px;height:14px;"></i>
          <span>Save name</span>
        </button>
        <p style="color:var(--text-muted);font-size:11px;margin-top:6px;">
          Ye naam home tracker me bhi dikhai dega.
        </p>
      </div>

      <div class="card">
        <h3>Font size</h3>
        <button class="btn-small" onclick="setFont(0.9)">Small</button>
        <button class="btn-small" onclick="setFont(1)">Medium</button>
        <button class="btn-small" onclick="setFont(1.15)">Large</button>
      </div>

      <div class="card">
        <h3>Theme (sab dark)</h3>
        <button class="btn-small" onclick="setTheme('emerald')">Emerald glass</button>
        <button class="btn-small" onclick="setTheme('night')">Deep night</button>
        <button class="btn-small" onclick="setTheme('graphite')">Graphite</button>
      </div>

      <div class="card">
        <h3>Data</h3>
        <button class="btn-small" onclick="resetJourney()">
          <i data-feather="trash-2" style="width:14px;height:14px;"></i>
          <span>Reset journey</span>
        </button>
      </div>
    </div>
  </div>

  <!-- NAVBAR -->
  <div class="navbar">
    <div class="nav-item active-tab" data-target="homeScreen" onclick="switchTab('homeScreen', this)">
      <i data-feather="home" class="nav-icon"></i>
      <span class="nav-label">HOME</span>
    </div>
    <div class="nav-item" data-target="urgeScreen" onclick="switchTab('urgeScreen', this)">
      <i data-feather="activity" class="nav-icon"></i>
      <span class="nav-label">URGE</span>
    </div>
    <div class="nav-item" data-target="awarenessScreen" onclick="switchTab('awarenessScreen', this)">
      <i data-feather="alert-circle" class="nav-icon"></i>
      <span class="nav-label">AWARE</span>
    </div>
    <div class="nav-item" data-target="mindScreen" onclick="switchTab('mindScreen', this)">
      <i data-feather="cpu" class="nav-icon"></i>
      <span class="nav-label">MIND</span>
    </div>
    <div class="nav-item" data-target="healthScreen" onclick="switchTab('healthScreen', this)">
      <i data-feather="heart" class="nav-icon"></i>
      <span class="nav-label">HEALTH</span>
    </div>
    <div class="nav-item" data-target="lifeScreen" onclick="switchTab('lifeScreen', this)">
      <i data-feather="users" class="nav-icon"></i>
      <span class="nav-label">LIFE</span>
    </div>
    <div class="nav-item" data-target="settingsScreen" onclick="switchTab('settingsScreen', this)">
      <i data-feather="settings" class="nav-icon"></i>
      <span class="nav-label">SETTINGS</span>
    </div>
  </div>

  <script>
    feather.replace();

    const STORAGE_QUIT = "qt_quit_date";
    const STORAGE_SPEND = "qt_daily_spend";
    const STORAGE_URGES = "qt_urges";
    const STORAGE_FONT = "qt_font";
    const STORAGE_THEME = "qt_theme";
    const STORAGE_NAME = "qt_name";

    const DEFAULT_HEALTH_MIN_PER_DAY = 60;

    let currentDays = 0;
    let currentMoney = 0;
    let currentHealthMinutes = 0;

    const QUOTES = [
      "Nicotine aapko relax nahi karta, pehle tension create karta hai phir thoda sa hata kar dhokha deta hai.",
      "Har baar aap 'no' bolte ho, aapka brain thoda aur free hota hai.",
      "Ye signal kuch minute ka hai, aapki freedom poori life ki.",
      "Purani aadat ki awaaz jitni loud ho, aapka decision usse zyada powerful hai.",
      "Stress solve karne ke liye clarity chahiye, tobacco nahi.",
      "Har urge par jeet, self-respect ka ek naya level kholti hai.",
      "Aap kuch kho nahi rahe, aap health, paise aur respect wapas le rahe ho.",
      "Ye uncomfortable feeling, body se poison nikalne ka proof hai.",
      "Aapka real dushman stress nahi, galat solution hai.",
      "Har clean din, future aapka shukriya ada karega."
    ];

    function switchTab(screenId, el) {
      document.querySelectorAll(".screen").forEach(s => s.classList.remove("show"));
      document.getElementById(screenId).classList.add("show");

      document.querySelectorAll(".nav-item").forEach(n => n.classList.remove("active-tab"));
      if (el) el.classList.add("active-tab");

      updateStats();
    }

    function setFont(scale) {
      document.documentElement.style.setProperty("--font-scale", scale);
      localStorage.setItem(STORAGE_FONT, scale);
    }

    function setTheme(name) {
      document.documentElement.classList.remove("theme-night", "theme-graphite");
      if (name === "night") document.documentElement.classList.add("theme-night");
      if (name === "graphite") document.documentElement.classList.add("theme-graphite");
      // emerald = default root, no extra class
      localStorage.setItem(STORAGE_THEME, name);
    }

    function showRandomQuote(targetId) {
      const el = document.getElementById(targetId);
      if (!el) return;
      const idx = Math.floor(Math.random() * QUOTES.length);
      el.textContent = QUOTES[idx];
    }

    function showReminder() {
      const toast = document.getElementById("reminderToast");
      const text = document.getElementById("reminderText");
      const idx = Math.floor(Math.random() * QUOTES.length);
      text.textContent = QUOTES[idx];
      toast.classList.add("show-toast");
      setTimeout(() => {
        toast.classList.remove("show-toast");
      }, 8000);
    }

    function hideReminder() {
      document.getElementById("reminderToast").classList.remove("show-toast");
    }

    function resetJourney() {
      if (!confirm("Puri journey reset karni hai? Sare stats clear ho jayenge.")) return;
      localStorage.removeItem(STORAGE_QUIT);
      localStorage.removeItem(STORAGE_SPEND);
      localStorage.removeItem(STORAGE_URGES);
      updateStats();
      alert("Journey reset ho gayi. Aap hamesha dobara fresh start le sakte ho.");
    }

    function updateStats() {
      const name = localStorage.getItem(STORAGE_NAME) || "Friend";
      const greetEl = document.getElementById("userGreeting");
      if (greetEl) {
        greetEl.textContent = "Hi, " + name;
      }

      const quitDateStr = localStorage.getItem(STORAGE_QUIT);
      const spend = Number(localStorage.getItem(STORAGE_SPEND) || 0);
      const urges = Number(localStorage.getItem(STORAGE_URGES) || 0);

      document.getElementById("urgesWon").textContent = urges.toString();

      if (!quitDateStr) {
        currentDays = 0;
        currentMoney = 0;
        currentHealthMinutes = 0;
        document.getElementById("dayLabel").textContent = "Day 0";
        document.getElementById("daysFree").textContent = "0";
        document.getElementById("moneySaved").textContent = "0";
        document.getElementById("lastUpdated").textContent = "Set your quit date";
        document.getElementById("streakCard").classList.remove("streak-glow");
        document.getElementById("healthSummary").textContent = "0 minutes";
        return;
      }

      const qDate = new Date(quitDateStr + "T00:00:00");
      const now = new Date();
      let diffMs = now - qDate;
      let days = Math.floor(diffMs / (1000 * 60 * 60 * 24));
      if (days < 0) days = 0;
      currentDays = days;

      const totalHealthMin = days * DEFAULT_HEALTH_MIN_PER_DAY;
      currentHealthMinutes = totalHealthMin;
      const hours = Math.floor(totalHealthMin / 60);
      const mins = totalHealthMin % 60;

      const money = days * spend;
      currentMoney = money;

      document.getElementById("dayLabel").textContent = "Day " + days;
      document.getElementById("daysFree").textContent = days;
      document.getElementById("moneySaved").textContent = money.toLocaleString("en-IN");

      const lastUpdated = now.toLocaleString("en-IN", { hour12: false });
      document.getElementById("lastUpdated").textContent = lastUpdated;

      const streakCard = document.getElementById("streakCard");
      if (days > 0) streakCard.classList.add("streak-glow");
      else streakCard.classList.remove("streak-glow");

      const healthSummaryEl = document.getElementById("healthSummary");
      if (hours > 0) {
        healthSummaryEl.textContent = hours + " hours " + mins + " minutes";
      } else {
        healthSummaryEl.textContent = mins + " minutes";
      }
    }

    function savePlan() {
      const quitInput = document.getElementById("quitDate");
      const spendInput = document.getElementById("dailySpend");

      if (quitInput.value) localStorage.setItem(STORAGE_QUIT, quitInput.value);
      if (spendInput.value) localStorage.setItem(STORAGE_SPEND, spendInput.value);

      updateStats();
      alert("Plan saved! Aapki journey ab app yaad rakhega.");
    }

    function addUrgeWin() {
      let urges = Number(localStorage.getItem(STORAGE_URGES) || 0);
      urges += 1;
      localStorage.setItem(STORAGE_URGES, urges);
      document.getElementById("urgesWon").textContent = urges.toString();
      showReminder();
    }

    function logMethod(method) {
      // Simple feedback; aage agar chaho to isko history me store bhi kar sakte ho
      document.getElementById("reminderText").textContent = "Noted: " + method + " se aapne urge handle ki.";
      document.getElementById("reminderToast").classList.add("show-toast");
      setTimeout(() => {
        hideReminder();
      }, 4000);
    }

    function saveName() {
      const input = document.getElementById("nameInput");
      const name = (input.value || "").trim() || "Friend";
      localStorage.setItem(STORAGE_NAME, name);
      updateStats();
      alert("Name saved!");
    }

    window.onload = () => {
      const fs = localStorage.getItem(STORAGE_FONT);
      const theme = localStorage.getItem(STORAGE_THEME);
      const name = localStorage.getItem(STORAGE_NAME) || "";

      if (fs) setFont(fs);
      if (theme) setTheme(theme);
      if (name) {
        const input = document.getElementById("nameInput");
        if (input) input.value = name;
      }

      const existingQuit = localStorage.getItem(STORAGE_QUIT);
      if (existingQuit) {
        document.getElementById("welcomeScreen").classList.remove("show");
        document.getElementById("homeScreen").classList.add("show");
      }

      updateStats();
      showRandomQuote("dailyQuote");

      setInterval(() => {
        showReminder();
      }, 90000);
    };

    document.getElementById("startBtn").addEventListener("click", () => {
      document.getElementById("welcomeScreen").classList.remove("show");
      switchTab("homeScreen", document.querySelector('.nav-item[data-target="homeScreen"]'));
    });

    document.getElementById("savePlan").addEventListener("click", savePlan);
    document.getElementById("urgeBtnHome").addEventListener("click", addUrgeWin);
    document.getElementById("urgeBtn").addEventListener("click", addUrgeWin);
    document.getElementById("newQuoteBtn").addEventListener("click", () => showRandomQuote("dailyQuote"));
  </script>
</body>
</html>